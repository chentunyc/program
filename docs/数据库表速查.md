# æ•°æ®åº“è¡¨é€ŸæŸ¥æ‰‹å†Œ

> å¿«é€ŸæŸ¥æ‰¾è¡¨åå’Œç”¨é€”

---

## ğŸ“‹ å…¨éƒ¨æ•°æ®è¡¨ä¸€è§ˆ (30å¼ è¡¨)

| åºå· | è¡¨å | ä¸­æ–‡å | ç”¨é€” | å…³é”®å­—æ®µ |
|-----|------|--------|------|---------|
| 1 | `t_user` | ç”¨æˆ·è¡¨ | å­˜å‚¨ç”¨æˆ·åŸºç¡€ä¿¡æ¯ | username, password, real_name, status |
| 2 | `t_role` | è§’è‰²è¡¨ | å®šä¹‰ç³»ç»Ÿè§’è‰² | role_code(ADMIN/TEACHER/STUDENT) |
| 3 | `t_permission` | æƒé™è¡¨ | èœå•å’ŒæŒ‰é’®æƒé™ | permission_code, permission_type |
| 4 | `t_user_role` | ç”¨æˆ·-è§’è‰²å…³è”è¡¨ | ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰² | user_id, role_id |
| 5 | `t_role_permission` | è§’è‰²-æƒé™å…³è”è¡¨ | è§’è‰²æ‹¥æœ‰çš„æƒé™ | role_id, permission_id |
| 6 | `t_user_profile` | ç”¨æˆ·è¯¦ç»†ä¿¡æ¯è¡¨ | ç”¨æˆ·æ‰©å±•ä¿¡æ¯ | department, major, class_name |
| 7 | `t_news` | æ–°é—»èµ„è®¯è¡¨ | å¹³å°æ–°é—»å‘å¸ƒ | title, content, cover_image, status |
| 8 | `t_notice` | å…¬å‘Šé€šçŸ¥è¡¨ | ç³»ç»Ÿå…¬å‘Šé€šçŸ¥ | title, content, notice_type, level |
| 9 | `t_user_favorite` | ç”¨æˆ·æ”¶è—è¡¨ | æ”¶è—è®°å½• | user_id, resource_type, resource_id |
| 10 | `t_user_message` | ç”¨æˆ·æ¶ˆæ¯è¡¨ | ç«™å†…æ¶ˆæ¯ | title, content, is_read, message_type |
| 11 | `t_resource` | èµ„æºåŸºç¡€è¡¨ | èµ„æºä¸»è¡¨ | resource_name, resource_type, is_shared |
| 12 | `t_resource_simulation` | è™šæ‹Ÿä»¿çœŸèµ„æºè¡¨ | ä»¿çœŸè¯¦æƒ… | simulation_url, technology |
| 13 | `t_resource_video` | è§†é¢‘èµ„æºè¡¨ | è§†é¢‘è¯¦æƒ… | video_url, duration, resolution |
| 14 | `t_resource_audio` | éŸ³é¢‘èµ„æºè¡¨ | éŸ³é¢‘è¯¦æƒ… | audio_url, duration, format |
| 15 | `t_resource_document` | æ–‡æ¡£èµ„æºè¡¨ | æ–‡æ¡£è¯¦æƒ… | document_url, format, page_count |
| 16 | `t_course` | è¯¾ç¨‹è¡¨ | è¯¾ç¨‹ä¿¡æ¯ | course_code, course_name, teacher_id |
| 17 | `t_training_task` | å®è®­ä»»åŠ¡è¡¨ | è¯¾ç¨‹ä»»åŠ¡ | task_name, task_type, total_score |
| 18 | `t_training_record` | å®è®­è®°å½•è¡¨ | å­¦ç”Ÿå®Œæˆè®°å½• | task_id, user_id, score, status |
| 19 | `t_user_course` | ç”¨æˆ·-è¯¾ç¨‹å…³è”è¡¨ | é€‰è¯¾è®°å½• | user_id, course_id, progress |
| 20 | `t_laboratory` | å®éªŒå®¤è¡¨ | å®éªŒå®¤åŸºç¡€ä¿¡æ¯ | lab_code, lab_name, capacity, status |
| 21 | `t_lab_reservation` | å®éªŒå®¤é¢„çº¦è¡¨ | é¢„çº¦ç”³è¯· | lab_id, user_id, reservation_date, status |
| 22 | `t_lab_usage_record` | å®éªŒå®¤ä½¿ç”¨è®°å½•è¡¨ | å®é™…ä½¿ç”¨è®°å½• | lab_id, user_id, duration |
| 23 | `t_shared_lab` | å…±äº«å®éªŒå®¤è¡¨ | å…±äº«é…ç½® | lab_id, share_type, open_days |
| 24 | `t_device_monitor` | è®¾å¤‡ç›‘æ§è¡¨ | è®¾å¤‡çŠ¶æ€ç›‘æ§ | device_name, device_status, cpu_usage |
| 25 | `t_resource_monitor` | èµ„æºç›‘æ§è¡¨ | èµ„æºè®¿é—®ç»Ÿè®¡ | resource_id, access_count, monitor_date |
| 26 | `t_teaching_monitor` | æ•™å­¦ç›‘æ§è¡¨ | æ•™å­¦æ•°æ®ç»Ÿè®¡ | course_id, active_students, avg_score |
| 27 | `t_teaching_plan` | æ•™å­¦è®¡åˆ’è¡¨ | æ•™å¸ˆæ•™å­¦è®¡åˆ’ | course_id, plan_name, content, status |
| 28 | `t_process_result` | è¿‡ç¨‹ç»“æœè¡¨ | å­¦ç”Ÿè¿‡ç¨‹æ•°æ® | task_id, user_id, process_data |
| 29 | `t_lab_application` | å®éªŒå®¤ç”³è¯·è¡¨ | æ•™å¸ˆç”³è¯·å®éªŒå®¤ | teacher_id, lab_id, purpose, status |
| 30 | `t_data_dict` | æ•°æ®å­—å…¸è¡¨ | ç³»ç»Ÿå­—å…¸é…ç½® | dict_type, dict_code, dict_value |
| 31 | `t_system_log` | ç³»ç»Ÿæ—¥å¿—è¡¨ | æ“ä½œæ—¥å¿— | log_type, user_id, operation, ip_address |
| 32 | `t_platform_setting` | å¹³å°è®¾ç½®è¡¨ | ç³»ç»Ÿé…ç½® | setting_key, setting_value, setting_type |
| 33 | `t_simulation_device` | ä»¿çœŸè®¾å¤‡è¡¨ | è®¾å¤‡èµ„äº§ç®¡ç† | device_code, device_name, lab_id, status |
| 34 | `t_teacher_info` | å¸ˆèµ„ä¿¡æ¯è¡¨ | æ•™å¸ˆæ‰©å±•ä¿¡æ¯ | user_id, title, degree, rating |

---

## ğŸ¯ æŒ‰åŠŸèƒ½æ¨¡å—æŸ¥æ‰¾

### 1. ç”¨æˆ·ç®¡ç†ç›¸å…³
```
t_user             - ç”¨æˆ·åŸºç¡€ä¿¡æ¯
t_user_profile     - ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
t_user_role        - ç”¨æˆ·è§’è‰²å…³è”
t_user_course      - ç”¨æˆ·é€‰è¯¾è®°å½•
t_user_favorite    - ç”¨æˆ·æ”¶è—
t_user_message     - ç”¨æˆ·æ¶ˆæ¯
t_teacher_info     - æ•™å¸ˆä¿¡æ¯
```

### 2. æƒé™ç®¡ç†ç›¸å…³
```
t_role             - è§’è‰²å®šä¹‰
t_permission       - æƒé™å®šä¹‰
t_role_permission  - è§’è‰²æƒé™å…³è”
```

### 3. å†…å®¹ç®¡ç†ç›¸å…³
```
t_news             - æ–°é—»èµ„è®¯
t_notice           - å…¬å‘Šé€šçŸ¥
```

### 4. èµ„æºç®¡ç†ç›¸å…³
```
t_resource              - èµ„æºåŸºç¡€è¡¨(ä¸»è¡¨)
t_resource_simulation   - è™šæ‹Ÿä»¿çœŸèµ„æº
t_resource_video        - è§†é¢‘èµ„æº
t_resource_audio        - éŸ³é¢‘èµ„æº
t_resource_document     - æ–‡æ¡£èµ„æº
t_resource_monitor      - èµ„æºç›‘æ§
```

### 5. è¯¾ç¨‹ç®¡ç†ç›¸å…³
```
t_course           - è¯¾ç¨‹ä¿¡æ¯
t_training_task    - å®è®­ä»»åŠ¡
t_training_record  - å®è®­è®°å½•
t_user_course      - é€‰è¯¾è®°å½•
t_teaching_plan    - æ•™å­¦è®¡åˆ’
t_teaching_monitor - æ•™å­¦ç›‘æ§
t_process_result   - è¿‡ç¨‹ç»“æœ
```

### 6. å®éªŒå®¤ç®¡ç†ç›¸å…³
```
t_laboratory          - å®éªŒå®¤ä¿¡æ¯
t_lab_reservation     - å®éªŒå®¤é¢„çº¦
t_lab_usage_record    - ä½¿ç”¨è®°å½•
t_lab_application     - å®éªŒå®¤ç”³è¯·
t_shared_lab          - å…±äº«é…ç½®
```

### 7. è®¾å¤‡ç®¡ç†ç›¸å…³
```
t_simulation_device   - ä»¿çœŸè®¾å¤‡èµ„äº§
t_device_monitor      - è®¾å¤‡ç›‘æ§
```

### 8. ç³»ç»Ÿç®¡ç†ç›¸å…³
```
t_data_dict           - æ•°æ®å­—å…¸
t_system_log          - ç³»ç»Ÿæ—¥å¿—
t_platform_setting    - å¹³å°è®¾ç½®
```

---

## ğŸ” å¸¸è§æŸ¥è¯¢åœºæ™¯

### åœºæ™¯1: æŸ¥è¯¢ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²å’Œæƒé™

```sql
-- æŸ¥è¯¢ç”¨æˆ·è§’è‰²
SELECT r.role_name, r.role_code
FROM t_user u
JOIN t_user_role ur ON u.id = ur.user_id
JOIN t_role r ON ur.role_id = r.id
WHERE u.username = 'admin' AND u.is_deleted = 0;

-- æŸ¥è¯¢ç”¨æˆ·æƒé™
SELECT DISTINCT p.permission_code, p.permission_name
FROM t_user u
JOIN t_user_role ur ON u.id = ur.user_id
JOIN t_role_permission rp ON ur.role_id = rp.role_id
JOIN t_permission p ON rp.permission_id = p.id
WHERE u.id = 1 AND u.is_deleted = 0 AND p.status = 1;
```

### åœºæ™¯2: æŸ¥è¯¢è¯¾ç¨‹åŠå…¶ä»»åŠ¡

```sql
-- æŸ¥è¯¢è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯
SELECT
  c.course_name,
  c.course_code,
  u.real_name AS teacher_name,
  c.enrolled_count,
  c.max_students,
  c.status
FROM t_course c
JOIN t_user u ON c.teacher_id = u.id
WHERE c.id = 1 AND c.is_deleted = 0;

-- æŸ¥è¯¢è¯¾ç¨‹ä¸‹çš„æ‰€æœ‰ä»»åŠ¡
SELECT
  task_name,
  task_type,
  total_score,
  start_time,
  end_time,
  status
FROM t_training_task
WHERE course_id = 1 AND is_deleted = 0
ORDER BY start_time;
```

### åœºæ™¯3: æŸ¥è¯¢å­¦ç”Ÿå­¦ä¹ è¿›åº¦

```sql
-- æŸ¥è¯¢å­¦ç”Ÿé€‰ä¿®çš„è¯¾ç¨‹åŠè¿›åº¦
SELECT
  c.course_name,
  uc.progress,
  uc.total_score,
  uc.enroll_time,
  uc.status
FROM t_user_course uc
JOIN t_course c ON uc.course_id = c.id
WHERE uc.user_id = 3 AND uc.is_deleted = 0;

-- æŸ¥è¯¢å­¦ç”Ÿå®Œæˆçš„ä»»åŠ¡è®°å½•
SELECT
  t.task_name,
  tr.score,
  tr.status,
  tr.submit_time,
  tr.teacher_comment
FROM t_training_record tr
JOIN t_training_task t ON tr.task_id = t.id
WHERE tr.user_id = 3 AND tr.is_deleted = 0;
```

### åœºæ™¯4: æŸ¥è¯¢å®éªŒå®¤é¢„çº¦æƒ…å†µ

```sql
-- æŸ¥è¯¢æŸå®éªŒå®¤çš„é¢„çº¦æƒ…å†µ
SELECT
  l.lab_name,
  u.real_name AS user_name,
  lr.reservation_date,
  lr.start_time,
  lr.end_time,
  lr.status
FROM t_lab_reservation lr
JOIN t_laboratory l ON lr.lab_id = l.id
JOIN t_user u ON lr.user_id = u.id
WHERE lr.lab_id = 1
  AND lr.reservation_date >= CURDATE()
  AND lr.is_deleted = 0
ORDER BY lr.reservation_date, lr.start_time;
```

### åœºæ™¯5: æŸ¥è¯¢èµ„æºåŠå…¶è¯¦ç»†ä¿¡æ¯

```sql
-- æŸ¥è¯¢è™šæ‹Ÿä»¿çœŸèµ„æº
SELECT
  r.resource_name,
  r.description,
  r.view_count,
  r.download_count,
  rs.simulation_url,
  rs.technology,
  rs.support_platform
FROM t_resource r
JOIN t_resource_simulation rs ON r.id = rs.resource_id
WHERE r.resource_type = 'SIMULATION'
  AND r.status = 1
  AND r.is_deleted = 0;

-- æŸ¥è¯¢è§†é¢‘èµ„æº
SELECT
  r.resource_name,
  rv.video_url,
  rv.duration,
  rv.resolution
FROM t_resource r
JOIN t_resource_video rv ON r.id = rv.resource_id
WHERE r.resource_type = 'VIDEO'
  AND r.status = 1
  AND r.is_deleted = 0;
```

---

## ğŸ“Š çŠ¶æ€ç é€ŸæŸ¥

### ç”¨æˆ·çŠ¶æ€ (t_user.status)
```
0 - ç¦ç”¨
1 - æ­£å¸¸
```

### è¯¾ç¨‹çŠ¶æ€ (t_course.status)
```
0 - æœªå¼€è¯¾
1 - è¿›è¡Œä¸­
2 - å·²ç»“è¯¾
```

### ä»»åŠ¡çŠ¶æ€ (t_training_task.status)
```
0 - æœªå‘å¸ƒ
1 - è¿›è¡Œä¸­
2 - å·²ç»“æŸ
```

### å®è®­è®°å½•çŠ¶æ€ (t_training_record.status)
```
0 - è¿›è¡Œä¸­
1 - å·²æäº¤
2 - å·²è¯„åˆ†
```

### èµ„æºçŠ¶æ€ (t_resource.status)
```
0 - å¾…å®¡æ ¸
1 - å·²å‘å¸ƒ
2 - å·²ä¸‹æ¶
```

### é¢„çº¦çŠ¶æ€ (t_lab_reservation.status)
```
0 - å¾…å®¡æ ¸
1 - å·²æ‰¹å‡†
2 - å·²æ‹’ç»
3 - å·²å–æ¶ˆ
4 - å·²å®Œæˆ
```

### è®¾å¤‡çŠ¶æ€ (t_device_monitor.device_status)
```
0 - ç¦»çº¿
1 - æ­£å¸¸
2 - å¼‚å¸¸
3 - ç»´æŠ¤ä¸­
```

### å…¬å‘Šç±»å‹ (t_notice.notice_type)
```
1 - ç³»ç»Ÿå…¬å‘Š
2 - æ•™å­¦é€šçŸ¥
3 - æ´»åŠ¨å…¬å‘Š
```

### å…¬å‘Šçº§åˆ« (t_notice.level)
```
1 - ä¸€èˆ¬
2 - é‡è¦
3 - ç´§æ€¥
```

### èµ„æºç±»å‹ (t_resource.resource_type)
```
SIMULATION - è™šæ‹Ÿä»¿çœŸ
VIDEO      - è§†é¢‘èµ„æº
AUDIO      - éŸ³é¢‘èµ„æº
DOCUMENT   - æ–‡æ¡£èµ„æº
```

### æƒé™ç±»å‹ (t_permission.permission_type)
```
1 - èœå•
2 - æŒ‰é’®
```

### æ¶ˆæ¯ç±»å‹ (t_user_message.message_type)
```
1 - ç³»ç»Ÿæ¶ˆæ¯
2 - è¯¾ç¨‹é€šçŸ¥
3 - å®éªŒæé†’
4 - å®¡æ ¸é€šçŸ¥
```

---

## ğŸ”‘ å”¯ä¸€ç´¢å¼•å­—æ®µ

**è¿™äº›å­—æ®µåœ¨è¡¨ä¸­å¿…é¡»å”¯ä¸€ï¼Œä¸èƒ½é‡å¤ï¼š**

| è¡¨å | å”¯ä¸€å­—æ®µ | è¯´æ˜ |
|-----|---------|------|
| `t_user` | `username` | ç”¨æˆ·å |
| `t_role` | `role_code` | è§’è‰²ç¼–ç  |
| `t_permission` | `permission_code` | æƒé™ç¼–ç  |
| `t_course` | `course_code` | è¯¾ç¨‹ç¼–ç  |
| `t_laboratory` | `lab_code` | å®éªŒå®¤ç¼–ç  |
| `t_simulation_device` | `device_code` | è®¾å¤‡ç¼–ç  |
| `t_platform_setting` | `setting_key` | é…ç½®é”® |
| `t_data_dict` | `(dict_type, dict_code)` | å­—å…¸ç±»å‹+ç¼–ç  |
| `t_user_role` | `(user_id, role_id)` | ç”¨æˆ·+è§’è‰² |
| `t_role_permission` | `(role_id, permission_id)` | è§’è‰²+æƒé™ |
| `t_user_course` | `(user_id, course_id)` | ç”¨æˆ·+è¯¾ç¨‹ |

---

## âš ï¸ é‡è¦çº¦å®š

### 1. é€»è¾‘åˆ é™¤
æ‰€æœ‰è¡¨éƒ½ä½¿ç”¨ `is_deleted` å­—æ®µæ ‡è®°åˆ é™¤çŠ¶æ€ï¼š
```sql
-- âœ… æ­£ç¡®ï¼šæŸ¥è¯¢æ—¶è¿‡æ»¤å·²åˆ é™¤æ•°æ®
SELECT * FROM t_user WHERE is_deleted = 0;

-- âŒ é”™è¯¯ï¼šæœªè¿‡æ»¤å·²åˆ é™¤æ•°æ®
SELECT * FROM t_user;
```

### 2. æ—¶é—´å­—æ®µ
- `create_time` - åˆ›å»ºæ—¶é—´ (è‡ªåŠ¨è®¾ç½®)
- `update_time` - æ›´æ–°æ—¶é—´ (è‡ªåŠ¨æ›´æ–°)
- æ—¶åŒºç»Ÿä¸€ä½¿ç”¨ `Asia/Shanghai (GMT+8)`

### 3. å¯†ç åŠ å¯†
- ç®—æ³•: BCrypt
- å¼ºåº¦: 12è½®
- æ ¼å¼: `$2a$12$xxxxx...`

### 4. JSONå­—æ®µ
ä»¥ä¸‹å­—æ®µå­˜å‚¨JSONæ ¼å¼æ•°æ®ï¼š
- `t_laboratory.equipment_list` - è®¾å¤‡æ¸…å•
- `t_shared_lab.open_time_slots` - å¼€æ”¾æ—¶æ®µ
- `t_process_result.process_data` - è¿‡ç¨‹æ•°æ®
- `t_process_result.score_details` - è¯„åˆ†æ˜ç»†

---

**å¿«é€Ÿå‚è€ƒå®Œæˆï¼** éœ€è¦è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ [æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md](./æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md)
