# 虚拟仿真实训教学管理及资源共享云平台 - 设计文档

## 1. 项目概述

### 1.1 技术栈
- **后端**: Spring Boot 3.2+ + MyBatis-Plus 3.5+
- **前端**: Vue 3 + ElementPlus + Pinia + Vue Router
- **数据库**: MySQL 8.0+
- **安全**: Spring Security + JWT
- **工具**: Lombok, Hutool, Swagger3

### 1.2 用户角色
- **学生(STUDENT)**: 基础用户，学习和实训
- **教师(TEACHER)**: 学生权限 + 教学管理权限
- **管理员(ADMIN)**: 全部权限

## 2. 功能模块设计

### 2.1 共有功能（本期实现）
```
├── 认证授权模块
│   ├── 登录/登出
│   ├── JWT Token管理
│   └── 角色权限控制
├── 首页模块
│   ├── 快捷入口
│   ├── 数据概览
│   └── 最新动态
├── 新闻公告模块
│   ├── 公告通知
│   └── 新闻资讯
├── 用户中心模块
│   ├── 我的信息
│   ├── 我的收藏
│   ├── 我的课程
│   ├── 我的实验
│   └── 我的消息
├── 资源中心模块
│   ├── 虚拟仿真资源
│   ├── 视频资源
│   ├── 音频资源
│   └── 文档资源
├── 实训中心模块
│   ├── 课程列表
│   ├── 实训任务
│   └── 实训进度
├── 实验室模块
│   ├── 实验室列表
│   ├── 预约管理
│   └── 使用记录
└── 共享开放模块
    ├── 实训资源共享
    └── 实验室开放
```

### 2.2 教师功能（预留接口）
```
├── 监控管理
│   ├── 设备监控
│   ├── 资源监控
│   └── 教学监控
├── 数据概览
│   ├── 概览统计
│   ├── 实训分析
│   └── 数据导出
├── 实训管理
│   ├── 课程管理
│   ├── 实训实验管理
│   ├── 教学计划
│   └── 过程结果
└── 资源管理
    └── 实验室申请
```

### 2.3 管理员功能（预留接口）
```
├── 综合管理
│   ├── 新闻公告管理
│   ├── 平台人员管理
│   └── 平台设置
├── 系统信息
│   ├── 系统用户
│   ├── 数据字典
│   └── 系统日志
└── 资源管理
    ├── 实验室管理
    ├── 仿真设备管理
    ├── 实训资源管理
    └── 师资管理
```

## 3. 数据库设计原则

### 3.1 命名规范
- 表名: `t_模块_实体` (如: t_user_info, t_news_notice)
- 字段: 小写下划线命名 (如: user_name, create_time)
- 索引: `idx_字段名` 或 `uk_字段名`(唯一索引)

### 3.2 公共字段
所有业务表包含:
- `id`: BIGINT, 主键, 自增
- `create_time`: DATETIME, 创建时间
- `update_time`: DATETIME, 更新时间
- `create_by`: BIGINT, 创建人ID
- `update_by`: BIGINT, 更新人ID
- `is_deleted`: TINYINT, 逻辑删除标记 (0-未删除, 1-已删除)

### 3.3 设计模式
- 使用外键逻辑关联，不使用物理外键（提高性能）
- 枚举值使用TINYINT或VARCHAR，配合数据字典
- 大文本使用TEXT，文件路径使用VARCHAR(500)
- 时间统一使用DATETIME类型

## 4. 后端项目结构

```
virtual-training-platform/
├── src/main/java/com/training/
│   ├── common/                     # 公共模块
│   │   ├── annotation/            # 自定义注解(日志、权限等)
│   │   ├── aspect/                # AOP切面
│   │   ├── config/                # 配置类
│   │   ├── constant/              # 常量定义
│   │   ├── enums/                 # 枚举类
│   │   ├── exception/             # 异常定义
│   │   ├── base/                  # 基础类(BaseEntity, BaseController等)
│   │   └── utils/                 # 工具类
│   ├── module/                     # 业务模块
│   │   ├── auth/                  # 认证授权
│   │   │   ├── controller/
│   │   │   ├── service/
│   │   │   ├── mapper/
│   │   │   ├── entity/
│   │   │   └── dto/vo/
│   │   ├── user/                  # 用户管理
│   │   ├── news/                  # 新闻公告
│   │   ├── resource/              # 资源中心
│   │   ├── training/              # 实训中心
│   │   ├── lab/                   # 实验室
│   │   ├── share/                 # 共享开放
│   │   ├── monitor/               # 监控管理(预留)
│   │   ├── data/                  # 数据概览(预留)
│   │   └── system/                # 系统管理(预留)
│   └── VirtualTrainingApplication.java
├── src/main/resources/
│   ├── mapper/                     # MyBatis XML
│   ├── application.yml
│   ├── application-dev.yml
│   └── application-prod.yml
└── pom.xml
```

## 5. 前端项目结构

```
training-platform-ui/
├── src/
│   ├── api/                       # API接口定义
│   │   ├── auth.js
│   │   ├── news.js
│   │   ├── user.js
│   │   └── ...
│   ├── assets/                    # 静态资源
│   ├── components/                # 公共组件
│   │   ├── Layout/               # 布局组件
│   │   ├── Common/               # 通用组件
│   │   └── Business/             # 业务组件
│   ├── router/                    # 路由配置
│   │   ├── index.js
│   │   └── modules/              # 模块路由
│   ├── store/                     # Pinia状态管理
│   │   ├── index.js
│   │   ├── modules/
│   │   │   ├── user.js
│   │   │   ├── app.js
│   │   │   └── ...
│   ├── styles/                    # 样式文件
│   ├── utils/                     # 工具函数
│   │   ├── request.js            # axios封装
│   │   ├── auth.js               # 权限工具
│   │   └── validate.js           # 表单验证
│   ├── views/                     # 页面组件
│   │   ├── login/
│   │   ├── home/
│   │   ├── news/
│   │   ├── user-center/
│   │   ├── resource/
│   │   ├── training/
│   │   ├── lab/
│   │   └── share/
│   ├── App.vue
│   └── main.js
├── public/
├── package.json
└── vite.config.js
```

## 6. 接口设计规范

### 6.1 RESTful API规范
```
GET    /api/v1/{module}/{resource}          # 查询列表
GET    /api/v1/{module}/{resource}/{id}     # 查询详情
POST   /api/v1/{module}/{resource}          # 新增
PUT    /api/v1/{module}/{resource}/{id}     # 更新
DELETE /api/v1/{module}/{resource}/{id}     # 删除
```

### 6.2 统一响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1704038400000
}
```

### 6.3 分页响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [],
    "total": 100,
    "current": 1,
    "size": 10
  }
}
```

## 7. 开发规范

### 7.1 Git提交规范
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 重构
- `test`: 测试相关
- `chore`: 构建/工具变动

### 7.2 代码规范
- 后端遵循阿里巴巴Java开发手册
- 前端遵循Vue3官方风格指南
- 所有公共方法必须写注释
- 复杂逻辑必须添加行内注释

## 8. 安全设计

### 8.1 认证流程
1. 用户登录 → 验证用户名密码
2. 生成JWT Token（包含用户ID、角色、权限）
3. 前端存储Token至localStorage
4. 后续请求携带Token在Header中
5. 后端验证Token并获取用户信息

### 8.2 权限控制
- 接口级: `@PreAuthorize("hasRole('ADMIN')")`
- 按钮级: `v-permission="['admin:user:add']"`
- 数据级: 通过SQL过滤用户可见数据范围

## 9. 性能优化

### 9.1 后端优化
- MyBatis-Plus分页插件
- Redis缓存热点数据
- 数据库索引优化
- 异步任务处理

### 9.2 前端优化
- 路由懒加载
- 组件按需引入
- 图片懒加载
- 接口请求防抖节流

## 10. 部署方案

### 10.1 开发环境
- 后端: IDEA + JDK 17
- 前端: VSCode + Node 18+
- 数据库: MySQL 8.0 本地安装

### 10.2 生产环境（预留）
- 应用服务器: Nginx + Tomcat
- 数据库: MySQL主从复制
- 缓存: Redis集群
- 文件存储: OSS对象存储
