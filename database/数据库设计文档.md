# 虚拟仿真实训教学管理平台 - 数据库设计文档

> **版本:** v1.0
> **数据库:** MySQL 8.0+
> **字符集:** utf8mb4
> **排序规则:** utf8mb4_unicode_ci
> **生成时间:** 2025-12-30

---

## 📋 目录

1. [数据库概述](#数据库概述)
2. [核心设计理念](#核心设计理念)
3. [模块架构](#模块架构)
4. [详细表结构](#详细表结构)
5. [ER关系图](#er关系图)
6. [索引策略](#索引策略)
7. [测试账号](#测试账号)

---

---


#
## 🏗️ 模块架构

数据库分为 **8 大功能模块**，共 **20+ 数据表**：

```
virtual_training_platform/
├── 1. 用户和权限模块 (5张表)
│   ├── t_user                用户表
│   ├── t_role                角色表
│   ├── t_permission          权限表
│   ├── t_user_role           用户-角色关联表
│   ├── t_role_permission     角色-权限关联表
│   └── t_user_profile        用户详细信息表
├── 2. 新闻公告模块 (1张表)
│   ├── t_news                新闻资讯表
├── 3. 用户中心模块 (3张表)
│   ├── t_user_favorite       用户收藏表
│   └── t_user_message        用户消息表
├── 4. 资源中心模块 (5张表)
│   ├── t_resource            资源基础表
│   ├── t_resource_simulation 虚拟仿真资源表
│   ├── t_resource_video      视频资源表
│   ├── t_resource_audio      音频资源表
│   └── t_resource_document   文档资源表
├── 5. 实训中心模块 (4张表)
│   ├── t_course              课程表
│   ├── t_training_task       实训任务表
│   ├── t_training_record     实训记录表
│   └── t_user_course         用户-课程关联表
├── 7. 教师功能模块 (2张表)
│   ├── t_teaching_plan       教学计划表
│   ├── t_process_result      过程结果表
├── 8. 管理员功能模块 (4张表)
│   └── t_teacher_info        师资信息表
```

---

## 📚 详细表结构

### 1️⃣ 用户和权限模块

#### 🔹 t_user (用户表)

**核心业务表**，存储所有用户基础信息。

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| `id` | BIGINT | ✅ | 用户ID (主键) | 1 |
| `username` | VARCHAR(50) | ✅ | 用户名 **(唯一)** | admin |
| `password` | VARCHAR(200) | ✅ | 密码(BCrypt加密) | $2a$12$... |
| `real_name` | VARCHAR(50) | ✅ | 真实姓名 | 张三 |
| `employee_no` | VARCHAR(50) | ❌ | id **(唯一)**| T001 |
| `gender` | TINYINT | ❌ | 性别: 0-未知, 1-男, 2-女 | 1 |
| `phone` | VARCHAR(20) | ❌ | 手机号 | 13800138000 |
| `email` | VARCHAR(100) | ❌ | 邮箱 | user@example.com |
| `avatar` | VARCHAR(500) | ❌ | 头像URL | /uploads/avatar.jpg |
| `status` | TINYINT | ✅ | 状态: 0-禁用, 1-正常 | 1 |
| `last_login_time` | DATETIME | ❌ | 最后登录时间 | 2025-12-30 10:30:00 |
| `last_login_ip` | VARCHAR(50) | ❌ | 最后登录IP | 192.168.1.100 |

**索引设计:**
```sql
PRIMARY KEY (id)
UNIQUE KEY uk_username (username)          -- 用户名唯一
KEY idx_employee_no (employee_no)          -- id查询
KEY idx_phone (phone)                      -- 手机号查询
KEY idx_create_time (create_time)         -- 创建时间排序
```

**业务规则:**
- 用户名、id全局唯一
- 密码使用 BCrypt 加密 (`$2a$12$` 前缀)

---

#### 🔹 t_role (角色表)

定义系统中的三种角色。

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| `id` | BIGINT | ✅ | 角色ID | 1 |
| `role_code` | VARCHAR(50) | ✅ | 角色编码 **(唯一)** | ADMIN |
| `role_name` | VARCHAR(50) | ✅ | 角色名称 | 管理员 |
| `description` | VARCHAR(200) | ❌ | 角色描述 | 系统管理员 |
| `sort_order` | INT | ❌ | 排序 | 1 |
| `status` | TINYINT | ✅ | 状态: 0-禁用, 1-正常 | 1 |

**预置角色:**
```sql
1: ADMIN    - 管理员 (所有权限)
2: TEACHER  - 教师   (教学管理权限)
3: STUDENT  - 学生   (学习相关权限)
```

---

#### 🔹 t_permission (权限表)

树形结构存储菜单和按钮权限。

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| `id` | BIGINT | ✅ | 权限ID | 1 |
| `parent_id` | BIGINT | ❌ | 父权限ID (0为顶级) | 0 |
| `permission_code` | VARCHAR(100) | ✅ | 权限编码 **(唯一)** | system:user:view |
| `permission_name` | VARCHAR(100) | ✅ | 权限名称 | 用户查看 |
| `permission_type` | TINYINT | ✅ | 类型: 1-菜单, 2-按钮 | 1 |
| `menu_path` | VARCHAR(200) | ❌ | 菜单路径 | /system/user |
| `menu_icon` | VARCHAR(100) | ❌ | 菜单图标 | user |
| `sort_order` | INT | ❌ | 排序 | 1 |
| `status` | TINYINT | ✅ | 状态: 0-禁用, 1-正常 | 1 |

**权限编码规范:**
```
格式: 模块:功能:操作
示例:
  - system:user:view    系统-用户-查看
  - course:create       课程-创建
  - lab:manage          实验室-管理
```

---

#### 🔹 t_user_role (用户-角色关联表)

多对多关系表，一个用户可以有多个角色。

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `id` | BIGINT | ✅ | 主键 |
| `user_id` | BIGINT | ✅ | 用户ID |
| `role_id` | BIGINT | ✅ | 角色ID |

**索引:**
```sql
UNIQUE KEY uk_user_role (user_id, role_id)  -- 防止重复分配
KEY idx_user_id (user_id)
KEY idx_role_id (role_id)
```

---

#### 🔹 t_role_permission (角色-权限关联表)

多对多关系表，定义角色拥有的权限。

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `id` | BIGINT | ✅ | 主键 |
| `role_id` | BIGINT | ✅ | 角色ID |
| `permission_id` | BIGINT | ✅ | 权限ID |

---

#### 🔹 t_user_profile (用户详细信息表)

扩展用户基础信息，一对一关系。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 主键 | 1 |
| `user_id` | BIGINT | 用户ID **(唯一)** | 1 |
| `department` | VARCHAR(100) | 院系/部门 | 计算机学院 |
| `major` | VARCHAR(100) | 专业 | 软件工程 |
| `class_name` | VARCHAR(50) | 班级 | 软工2101 |
| `grade` | VARCHAR(20) | 年级 | 2021 |
| `birth_date` | DATE | 出生日期 | 2003-05-15 |
| `id_card` | VARCHAR(18) | 身份证号 | 110101200305151234 |
| `address` | VARCHAR(200) | 地址 | 北京市海淀区 |
| `introduction` | TEXT | 个人简介 | - |

---

### 2️⃣ 新闻公告模块

#### 🔹 t_news (新闻资讯表)

发布平台新闻和资讯。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 新闻ID | 1 |
| `title` | VARCHAR(200) | 新闻标题 | 平台正式上线通知 |
| `summary` | VARCHAR(500) | 新闻摘要 | 本平台于今日正式上线... |
| `content` | TEXT | 新闻内容(富文本) | `<p>详细内容...</p>` |
| `cover_image` | VARCHAR(500) | 封面图片URL | /uploads/news/cover.jpg |
| `author` | VARCHAR(50) | 作者 | 张三 |
| `source` | VARCHAR(100) | 来源 | 教务处 |
| `category` | VARCHAR(50) | 分类 | 系统公告 |
| `tags` | VARCHAR(200) | 标签(逗号分隔) | 上线,通知,重要 |
| `view_count` | INT | 浏览次数 | 1250 |
| `is_top` | TINYINT | 是否置顶: 0-否, 1-是 | 1 |
| `is_recommend` | TINYINT | 是否推荐: 0-否, 1-是 | 1 |
| `publish_time` | DATETIME | 发布时间 | 2025-12-30 09:00:00 |
| `status` | TINYINT | 状态: 0-草稿, 1-已发布, 2-已下架 | 1 |

**索引:**
```sql
KEY idx_category (category)
KEY idx_status (status)
KEY idx_publish_time (publish_time)
```

### 3️⃣ 用户中心模块

#### 🔹 t_user_favorite (用户收藏表)

用户收藏的资源记录。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 主键 | 1 |
| `user_id` | BIGINT | 用户ID | 3 |
| `resource_type` | VARCHAR(50) | 资源类型 | NEWS, NOTICE, COURSE, RESOURCE, LAB |
| `resource_id` | BIGINT | 资源ID | 10 |

**索引:**
```sql
UNIQUE KEY uk_user_resource (user_id, resource_type, resource_id)
```

---

#### 🔹 t_user_message (用户消息表)

系统消息和通知。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 消息ID | 1 |
| `user_id` | BIGINT | 接收用户ID | 3 |
| `sender_id` | BIGINT | 发送者ID (系统消息为NULL) | NULL |
| `message_type` | TINYINT | 类型: 1-系统, 2-课程, 3-实验, 4-审核 | 1 |
| `title` | VARCHAR(200) | 消息标题 | 您有新的作业待提交 |
| `content` | TEXT | 消息内容 | - |
| `link_url` | VARCHAR(500) | 关联链接 | /course/123/task/456 |
| `is_read` | TINYINT | 是否已读: 0-未读, 1-已读 | 0 |
| `read_time` | DATETIME | 阅读时间 | NULL |

---

### 4️⃣ 资源中心模块

#### 🔹 t_resource (资源基础表)

所有资源的基础信息表，采用 **主从表设计模式**。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 资源ID | 1 |
| `resource_name` | VARCHAR(200) | 资源名称 | 化学实验虚拟仿真系统 |
| `resource_type` | VARCHAR(50) | 资源类型 | SIMULATION, VIDEO, AUDIO, DOCUMENT |
| `description` | TEXT | 资源描述 | - |
| `cover_image` | VARCHAR(500) | 封面图片 | /uploads/cover.jpg |
| `category` | VARCHAR(50) | 分类 | 化学实验 |
| `tags` | VARCHAR(200) | 标签(逗号分隔) | 虚拟仿真,化学,实验 |
| `uploader_id` | BIGINT | 上传者ID | 2 |
| `file_size` | BIGINT | 文件大小(字节) | 1048576000 |
| `download_count` | INT | 下载次数 | 158 |
| `view_count` | INT | 浏览次数 | 1250 |
| `is_shared` | TINYINT | 是否共享: 0-否, 1-是 | 1 |
| `status` | TINYINT | 状态: 0-待审核, 1-已发布, 2-已下架 | 1 |

**资源类型详细表设计 (一对一关系):**

| 资源类型 | 详细表 | 存储内容 |
|---------|--------|---------|
| SIMULATION | `t_resource_simulation` | 仿真URL、技术栈、平台要求 |
| VIDEO | `t_resource_video` | 视频URL、时长、分辨率、字幕 |
| AUDIO | `t_resource_audio` | 音频URL、时长、格式、比特率 |
| DOCUMENT | `t_resource_document` | 文档URL、格式、页数、预览URL |

---

#### 🔹 t_resource_simulation (虚拟仿真资源表)

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 主键 | 1 |
| `resource_id` | BIGINT | 资源ID **(唯一)** | 1 |
| `simulation_url` | VARCHAR(500) | 仿真URL/启动地址 | http://sim.example.com/chem-lab |
| `technology` | VARCHAR(100) | 技术栈 | Unity3D, WebGL |
| `support_platform` | VARCHAR(100) | 支持平台 | PC, Mobile, Web |
| `min_requirement` | VARCHAR(500) | 最低配置要求 | CPU: i5, RAM: 8GB, GPU: GTX1050 |

---

### 5️⃣ 实训中心模块

#### 🔹 t_course (课程表)

教师创建的课程信息。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 课程ID | 1 |
| `course_code` | VARCHAR(50) | 课程编码 **(唯一)** | CS101 |
| `course_name` | VARCHAR(200) | 课程名称 | 计算机基础 |
| `description` | TEXT | 课程描述 | - |
| `cover_image` | VARCHAR(500) | 课程封面 | /uploads/course/cover.jpg |
| `teacher_id` | BIGINT | 授课教师ID | 2 |
| `department` | VARCHAR(100) | 开课院系 | 计算机学院 |
| `credit` | DECIMAL(3,1) | 学分 | 3.0 |
| `total_hours` | INT | 总学时 | 48 |
| `category` | VARCHAR(50) | 课程类别 | 专业必修 |
| `difficulty` | TINYINT | 难度: 1-初级, 2-中级, 3-高级 | 1 |
| `start_time` | DATETIME | 开课时间 | 2025-09-01 08:00:00 |
| `end_time` | DATETIME | 结课时间 | 2026-01-10 18:00:00 |
| `max_students` | INT | 最大学生数 | 60 |
| `enrolled_count` | INT | 已报名人数 | 45 |
| `status` | TINYINT | 状态: 0-未开课, 1-进行中, 2-已结课 | 1 |

---

#### 🔹 t_training_task (实训任务表)

课程下的实训任务。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 任务ID | 1 |
| `course_id` | BIGINT | 课程ID | 1 |
| `task_name` | VARCHAR(200) | 任务名称 | 数据库设计作业 |
| `description` | TEXT | 任务描述 | - |
| `task_type` | TINYINT | 类型: 1-理论, 2-实践, 3-综合 | 2 |
| `resource_id` | BIGINT | 关联资源ID | 10 |
| `lab_id` | BIGINT | 关联实验室ID | 5 |
| `difficulty` | TINYINT | 难度 | 2 |
| `total_score` | INT | 总分 | 100 |
| `pass_score` | INT | 及格分 | 60 |
| `time_limit` | INT | 时间限制(分钟) | 120 |
| `start_time` | DATETIME | 开始时间 | 2025-12-01 08:00:00 |
| `end_time` | DATETIME | 结束时间 | 2025-12-31 23:59:59 |
| `attachment_url` | VARCHAR(500) | 附件URL | /uploads/task/task1.pdf |
| `status` | TINYINT | 状态: 0-未发布, 1-进行中, 2-已结束 | 1 |

---

#### 🔹 t_training_record (实训记录表)

学生完成任务的记录。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 记录ID | 1 |
| `task_id` | BIGINT | 任务ID | 1 |
| `user_id` | BIGINT | 学生ID | 3 |
| `start_time` | DATETIME | 开始时间 | 2025-12-10 09:00:00 |
| `end_time` | DATETIME | 结束时间 | 2025-12-10 11:30:00 |
| `duration` | INT | 用时(分钟) | 150 |
| `score` | DECIMAL(5,2) | 得分 | 85.50 |
| `submit_content` | TEXT | 提交内容 | - |
| `submit_attachment` | VARCHAR(500) | 提交附件URL | /uploads/submit/report.pdf |
| `teacher_comment` | TEXT | 教师评语 | 完成质量良好 |
| `status` | TINYINT | 状态: 0-进行中, 1-已提交, 2-已评分 | 2 |

---

#### 🔹 t_user_course (用户-课程关联表)

学生选课记录。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 主键 | 1 |
| `user_id` | BIGINT | 用户ID | 3 |
| `course_id` | BIGINT | 课程ID | 1 |
| `enroll_time` | DATETIME | 报名时间 | 2025-09-01 10:00:00 |
| `progress` | INT | 学习进度(%) | 75 |
| `total_score` | DECIMAL(5,2) | 总成绩 | 88.50 |
| `status` | TINYINT | 状态: 1-学习中, 2-已完成, 3-已退出 | 1 |


### 7️⃣ 教师功能模块



#### 🔹 t_teaching_plan (教学计划表)

教师制定的教学计划。

| 字段名 | 类型 | 说明 |
|--------|------|------|
| `id` | BIGINT | 计划ID |
| `course_id` | BIGINT | 课程ID |
| `teacher_id` | BIGINT | 教师ID |
| `plan_name` | VARCHAR(200) | 计划名称 |
| `semester` | VARCHAR(50) | 学期 |
| `week_number` | INT | 周次 |
| `content` | TEXT | 教学内容 |
| `objective` | TEXT | 教学目标 |
| `method` | VARCHAR(500) | 教学方法 |
| `resource_ids` | VARCHAR(500) | 关联资源ID(逗号分隔) |
| `homework` | TEXT | 作业安排 |
| `status` | TINYINT | 状态: 0-计划中, 1-进行中, 2-已完成 |

---

#### 🔹 t_process_result (过程结果表)

学生实训过程数据记录。

| 字段名 | 类型 | 说明 |
|--------|------|------|
| `id` | BIGINT | 结果ID |
| `task_id` | BIGINT | 任务ID |
| `user_id` | BIGINT | 学生ID |
| `process_data` | TEXT | 过程数据(JSON) |
| `step_records` | TEXT | 步骤记录 |
| `answer_records` | TEXT | 答题记录 |
| `operation_logs` | TEXT | 操作日志 |
| `score_details` | TEXT | 评分明细(JSON) |

**索引:**
```sql
UNIQUE KEY uk_task_user (task_id, user_id)
```

---

### 8️⃣ 管理员功能模块

#### 🔹 t_data_dict (数据字典表)

系统数据字典配置。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 字典ID | 1 |
| `dict_type` | VARCHAR(100) | 字典类型 | user_gender |
| `dict_code` | VARCHAR(100) | 字典编码 | MALE |
| `dict_label` | VARCHAR(200) | 字典标签 | 男 |
| `dict_value` | VARCHAR(200) | 字典值 | 1 |
| `sort_order` | INT | 排序 | 1 |
| `remark` | VARCHAR(500) | 备注 | - |
| `status` | TINYINT | 状态 | 1 |

**预置字典:**
```sql
user_gender:  UNKNOWN(未知), MALE(男), FEMALE(女)
user_status:  DISABLED(禁用), NORMAL(正常)
resource_type: SIMULATION(虚拟仿真), VIDEO(视频), AUDIO(音频), DOCUMENT(文档)
```

---

#### 🔹 t_system_log (系统日志表)

系统操作日志记录。

| 字段名 | 类型 | 说明 |
|--------|------|------|
| `id` | BIGINT | 日志ID |
| `log_type` | TINYINT | 类型: 1-登录, 2-操作, 3-异常 |
| `user_id` | BIGINT | 用户ID |
| `username` | VARCHAR(50) | 用户名 |
| `operation` | VARCHAR(200) | 操作内容 |
| `method` | VARCHAR(200) | 请求方法 |
| `params` | TEXT | 请求参数 |
| `ip_address` | VARCHAR(50) | IP地址 |
| `location` | VARCHAR(100) | IP归属地 |
| `browser` | VARCHAR(100) | 浏览器 |
| `os` | VARCHAR(100) | 操作系统 |
| `status` | TINYINT | 状态: 0-失败, 1-成功 |
| `error_message` | TEXT | 错误信息 |
| `execute_time` | INT | 执行时长(毫秒) |

---

#### 🔹 t_platform_setting (平台设置表)

系统配置项。

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `id` | BIGINT | 设置ID | 1 |
| `setting_key` | VARCHAR(100) | 设置键 **(唯一)** | system.title |
| `setting_value` | TEXT | 设置值 | 虚拟仿真实训平台 |
| `setting_type` | VARCHAR(50) | 类型 | STRING, NUMBER, BOOLEAN, JSON |
| `description` | VARCHAR(500) | 设置描述 | 系统标题 |
| `group_name` | VARCHAR(50) | 分组名称 | 基础设置 |



---

#### 🔹 t_teacher_info (师资信息表)

教师扩展信息。

| 字段名 | 类型 | 说明 |
|--------|------|------|
| `id` | BIGINT | 主键 |
| `user_id` | BIGINT | 用户ID **(唯一)** |
| `title` | VARCHAR(50) | 职称 |
| `degree` | VARCHAR(50) | 学位 |
| `research_direction` | VARCHAR(500) | 研究方向 |
| `achievements` | TEXT | 教学成果 |
| `projects` | TEXT | 科研项目 |
| `publications` | TEXT | 发表论文 |
| `awards` | TEXT | 获奖情况 |
| `teaching_years` | INT | 教学年限 |
| `course_count` | INT | 授课门数 |
| `student_count` | INT | 指导学生数 |
| `rating` | DECIMAL(3,2) | 教学评分(5分制) |

---

## 🔗 ER关系图

### 核心实体关系

```
                    ┌─────────────┐
                    │   t_user    │
                    │   (用户)     │
                    └──────┬──────┘
                           │
              ┌────────────┼────────────┐
              │            │            │
         1:N  │       M:N  │       1:1  │
              ▼            ▼            ▼
    ┌─────────────┐  ┌──────────┐  ┌──────────────┐
    │ t_user_role │  │ t_course │  │t_user_profile│
    └─────────────┘  └────┬─────┘  └──────────────┘
              │           │
         M:N  │      1:N  │
              ▼           ▼
    ┌─────────────┐  ┌────────────────┐
    │   t_role    │  │t_training_task │
    └──────┬──────┘  └────────┬───────┘
           │                  │
      M:N  │             1:N  │
           ▼                  ▼
  ┌────────────────┐  ┌──────────────────┐
  │ t_permission   │  │t_training_record │
  └────────────────┘  └──────────────────┘
```

### 资源模块关系

```
┌──────────────┐
│  t_resource  │ (资源基础表)
│  (主表)      │
└──────┬───────┘
       │
       │ 1:1 (多态关联)
       │
       ├─────────► t_resource_simulation (虚拟仿真)
       ├─────────► t_resource_video      (视频)
       ├─────────► t_resource_audio      (音频)
       └─────────► t_resource_document   (文档)
```

